# 第1章 DDDへの誘い

## DDDを実践するために

* DDDを実践するためには `業務について理解する` ことが必要
    * `ユビキタス言語` の生み出しに参加できる
* 業務で最も大切なことを知っている `ドメインエキスパート` の視点を尊重することが大切
    * 技術用語を使わないドメインエキスパートとの会話は、お互い多くのことを学ぶことができる
    * ドメインエキスパートが「知っているであろうこと」を聞くことで、わかっていないことを炙り出せる
    * お互いの立場で業務に対する知識を深めることで `業務の改善` をはかれる
* ドメインエキスパートは役職ではない、業務の流れについてよく知っている人をドメインエキスパートとすればいい
* 技術的なスキルだけでなく `ドメインモデリング` などの高度な概念も身につける必要が出てくる
* ドメインモデルとは、業務ドメインに特化したソフトウェアモデルのこと
    * 扱うデータ、振る舞いを業務的に正確な意味で保持する
    * DDDを実践する上で欠かせないもの
    * DDDにおけるドメインモデルによって、業務全体をまるごと大きなドメインとして扱うことはなくなり、より小さい、より集中したものになる

## DDDのメリット

* ドメインエキスパートと実装者が同じ土俵に立つことで、プログラマ視点のみならず業務視点も踏まえたソフトウェアを実現できる
* すべてを把握している人はいない、手を取り合うことで気づきを得るための議論に誰しもが参加することができるようになる
* ユビキタス言語を用いるためプログラマと他の視点で翻訳が必要なくなる
* 極端な話、プログラマじゃなくてもコードを見て（自然言語的に）何をしているのかがなんとなくイメージできるようになる
* `戦略的モデリング` と `戦術的モデリング` 両方のためのツールがある
    * 戦略的設計と戦術的設計の両面のメリットの恩恵を受けることができる
    * 戦略的モデリング：コアドメイン/サブドメイン、境界付けられたコンテキスト、コンテキストマップetc.
    * 戦術的モデリング：エンティティ、レポジトリ、レイヤードアーキテクチャetc.
* 一般的にプロダクトコードは開発者視点のため `事業価値` をもたらすのは難しいが、事業価値に注視するドメインエキスパートの視点をコードに落とし込むことでその困難に立ち向かえる

### DDDを導入する検討基準

* DDDを一番に導入したいのは `コアドメイン`、時点で `重要な支援サブドメイン`
* 目下、取り組もうとしている作業にコストをかけてDDDを導入するに値するものであるかを判断する必要がある
    * 判断する基準は `複雑` かどうか→ `簡単ではないか` を基準にするとわかりやすい

### 中途半端にDDDを導入すると・・・

* `ドメインモデル貧血症` を発症してしまう
* リレーショナルモデルをオブジェクトに投影しただけの `トランザクションスクリプト` になってしまう

### DDDを行うには

#### ユビキタス言語を用いる

* チームで共有する言語、チーム内の立場が何であれメンバーである以上はプロジェクトの `ユビキタス言語` を使う
* 開発者、ドメインエキスパートを同じ土俵に立たせるものでもなければ、業界用語を矯正するものでもなく、実際の会話で用いる言語を作る
* ユビキタス言語は業務で使う言語のことではない、業界標準語やドメインエキスパートが普段使っている言葉でもない

#### ユビキタス言語の見つけ方

* 物理的なドメインと概念的なドメインを図で示して、それぞれに名前とアクションを定義する
* シンプルな定義をまとめた `用語集` を作る、ユビキタス言語は成長するものなので用語集はいつでも捨てられるようにしておく
* 用語集作成は少人数で行っても、まとまったものは残りのメンバーにレビューしてもらう
* ユビキタスではあるがユニバーサル打はないことに注意する
    * 境界づけられたコンテキストごとに、それぞれのユビキタス言語が存在する
    * 境界づけられたコンテキストは当初の想定より比較的小さくなるため、ユビキタス言語もそのドメインを捉えることができる程度の大きさにとどまる
    * その言語がユビキタスになるのは、対象とする境界づけられたコンテキストの開発チーム内のみ
    * 他の境界づけられたコンテキストとの統合には `コンテキストマップ` を用いる
    * 一つのユビキタス言語を事業全体で共有しようとしたりすると失敗するので注意
* つまり、ユビキタス言語の導入には境界づけられたコンテキストをうまく見つけ出すことが大切
* 対象とする境界づけられたコンテキスト内のドメインモデル用のユビキタス言語を議論し、探求し、概念化してみんなで作りみんなで使う
* 対象とする境界づけられたコンテキストのユビキタス言語に含まれない概念はすべて却下する（他の境界づけられたコンテキストの対象だったりする）
